# Spring Boot 파일 업로드 코드 설명

이 코드는 Spring Boot와 간단한 HTML 인터페이스를 통해 단일 및 다중 파일 업로드와 DTO(Data Transfer Object)를 통한 메타데이터 전송 기능을 제공합니다. 각 구성 요소와 주요 기능을 아래에 정리했습니다.

---

## 1. 컨트롤러: `FileUpDownloadController`

Spring MVC `@Controller`로 파일 업로드를 처리하며, `/file` 경로로 매핑되어 있습니다. 이 컨트롤러에는 단일 파일, 다중 파일, DTO와 함께 다중 파일 업로드 기능이 포함되어 있습니다.

### 주요 어노테이션 및 상수

- **`@Controller`**: 이 클래스를 Spring MVC 컨트롤러로 지정합니다.
- **`@RequestMapping("/file")`**: 이 컨트롤러의 기본 URL 경로를 `/file`로 설정합니다.
- **`UPLOAD_PATH`**: 파일 저장 경로로 `c:\\upload`를 설정합니다.

### 메서드 설명

#### `GET` 매핑

- **`upload()`** (`/file/upload` 경로): 파일 업로드 페이지를 사용자에게 제공합니다.

#### `POST` 매핑

- **`upload_post()`**: 단일 파일 업로드를 처리합니다.
  - 파일 이름과 크기를 로그에 기록.
  - `UUID`로 고유 폴더를 생성.
  - 업로드된 파일을 해당 폴더에 저장.
  
- **`upload_post_multi()`**: 다중 파일 업로드를 처리합니다.
  - 단일 파일 업로드와 유사하나, `MultipartFile[] files` 배열을 반복하여 각 파일을 처리합니다.
  - 각 파일을 생성된 고유 폴더에 저장.

- **`upload_post_multi_dto()`**: DTO를 사용하여 메타데이터와 다중 파일 업로드를 처리합니다.
  - `FileDto` 객체로 파일 배열과 관련 데이터를 함께 캡처합니다.
  - `FileDto` 정보를 로그에 기록.

---

## 2. 데이터 전송 객체 (DTO): `FileDto`

이 클래스는 파일과 함께 업로드되는 추가 데이터 필드를 포함합니다.

### 필드

- **`id`** (int): 파일의 식별자.
- **`category`** (String): 파일에 관련된 카테고리.
- **`price`** (int): 업로드와 관련된 가격 정보.
- **`files`** (MultipartFile[]): 업로드된 파일의 배열.

DTO를 통해 메타데이터(예: `category` 또는 `price`)와 파일을 함께 제출할 수 있어, 관련 정보를 포함한 업로드가 필요할 때 유용합니다.

---

## 3. HTML 파일 업로드 폼

HTML 페이지는 파일 업로드를 위한 세 가지 섹션을 포함합니다.

1. **단일 파일 업로드**:
   - `/file/upload` 엔드포인트 사용.
   - 파일 입력 (`name="file"`)과 제출 버튼 포함.

2. **다중 파일 업로드**:
   - `/file/multiUpload` 엔드포인트 사용.
   - 파일 입력 필드에 `multiple` 속성으로 여러 파일 선택 및 업로드 가능.

3. **DTO와 함께 다중 파일 업로드**:
   - `/file/multiUpload_dto` 엔드포인트 사용.
   - `id`, `category`, `price` 필드를 입력할 수 있는 텍스트 필드로 추가 데이터 캡처.
   - 다중 파일 입력 필드로 DTO 필드와 함께 제출.

---

## 전체 흐름 요약

1. 사용자가 `/file/upload` 경로를 통해 파일 업로드 페이지에 접속합니다.
2. 사용자 단일 파일, 다중 파일 또는 메타데이터와 함께 다중 파일을 업로드.
3. 각 업로드가 처리되어 고유한 폴더에 저장되고, DTO 제공 시 해당 정보가 로그에 기록됩니다.

---

## 코드 주의 사항

- **에러 처리**: 파일 작업 시 발생할 수 있는 에러(예: 파일 쓰기 오류)에 대한 처리가 포함되어 있지 않으므로, 코드의 견고성을 위해 추가하는 것이 좋습니다.
- **디렉토리 생성**: `UUID.randomUUID()`로 고유한 이름의 디렉토리를 생성하여 각 업로드를 독립적으로 관리합니다.

이 구조는 다양한 유형의 파일 및 관련 데이터를 다루기에 유연하고 확장 가능한 형태로 설계되었습니다.
